import{_ as e}from"./index-BiwZp9Zd.js";import{c as a,r as t,K as i,L as n,N as s,j as l,Q as o,B as r,O as c,_ as d,P as p,y as u,F as v,$ as m,R as g,w as y}from"./vue-vendor-BDmscHTi.js";const f={class:"traditional-interpretation"},b={key:0,class:"loading-container"},k={key:1,class:"interpretation-content"},h={class:"basic-info"},_={class:"hexagram-title"},x={class:"hexagram-name"},I={class:"hexagram-symbol"},z={class:"hexagram-composition"},w={class:"composition-text"},A={class:"hexagram-meaning"},q={class:"meaning-text"},C={class:"hexagram-nature"},V={class:"nature-text"},j={key:0,class:"tuan-section"},T={class:"classical-text"},L={key:1,class:"xiang-section"},B={class:"classical-text"},O={key:2,class:"xiangYue-section"},Q={class:"classical-text xiangYue-text"},S={key:3,class:"yongshen-section"},D={class:"yongshen-text"},R={key:4,class:"yao-section"},U={class:"yao-content"},Y={class:"yao-text"},$={class:"modern-interpretation-section"},E={class:"aspects-grid"},N={key:0,class:"aspect-card"},F={class:"aspect-header"},K={class:"aspect-content"},P={key:1,class:"aspect-card"},G={class:"aspect-header"},H={class:"aspect-content"},J={key:2,class:"aspect-card"},M={class:"aspect-header"},W={class:"aspect-content"},X={key:3,class:"aspect-card"},Z={class:"aspect-header"},ee={class:"aspect-content"},ae={key:4,class:"aspect-card"},te={class:"aspect-header"},ie={class:"aspect-content"},ne={key:5,class:"aspect-card"},se={class:"aspect-header"},le={class:"aspect-content"},oe={key:5,class:"aspects-section"},re={class:"aspects-grid"},ce={class:"aspect-header"},de={class:"aspect-name"},pe={key:0,class:"aspect-level"},ue={class:"aspect-content"},ve={key:6,class:"lines-section"},me={class:"line-title"},ge={class:"line-name"},ye={class:"line-type"},fe={key:0,class:"changing-indicator"},be={class:"line-content"},ke={class:"line-symbol"},he={class:"line-interpretation"},_e={key:7,class:"changing-section"},xe={class:"changing-info"},Ie={class:"changing-positions"},ze={class:"changing-count"},we={class:"changing-interpretation"},Ae={class:"changing-advice"},qe={class:"advice-text"},Ce={key:8,class:"summary-section"},Ve={class:"summary-content"},je={key:9,class:"timestamp"},Te={key:2,class:"empty-state"},Le=e({__name:"TraditionalInterpretation",props:{interpretation:{type:Object,default:null},guaData:{type:Object,default:null},loading:{type:Boolean,default:!1}},setup(e){const y=e,Le=a(()=>y.interpretation?.guaData||y.guaData);a(()=>y.interpretation?.hexagram);const Be=t([]),Oe=(e,a)=>{const t=e.match(/^(初[六九]|[二三四五][六九]|上[六九])/);return t?t[1]:`${["初","二","三","四","五","上"][a]}爻`},Qe=e=>({good:"#07c160",neutral:"#ff976a",bad:"#ee0a24"}[e]||"#ff976a");return(a,t)=>{const y=i("van-loading"),Se=i("van-collapse-item"),De=i("van-collapse"),Re=i("van-icon"),Ue=i("van-tag"),Ye=i("van-card"),$e=i("van-notice-bar"),Ee=i("van-empty");return s(),n("div",f,[e.loading?(s(),n("div",b,[l(y,{size:"24px",color:"#8b0000"},{default:o(()=>t[2]||(t[2]=[r("解卦中...",-1)])),_:1,__:[2]})])):Le.value?(s(),n("div",k,[c("div",h,[c("div",_,[c("h3",x,p(Le.value.name)+"卦",1),c("div",I,p(Le.value.symbol),1)]),c("div",z,[c("span",w," 上"+p(Le.value.upper)+"下"+p(Le.value.lower),1),c("span",{class:u(["level-badge",`level-${Le.value.level?.replace("卦","")}`])},p(Le.value.level),3)]),c("div",A,[t[3]||(t[3]=c("div",{class:"meaning-label"},"卦名",-1)),c("div",q,p(Le.value.meaning),1)]),c("div",C,[t[4]||(t[4]=c("div",{class:"nature-label"},"卦性",-1)),c("div",V,p(Le.value.nature),1)])]),Le.value.tuan?(s(),n("div",j,[t[5]||(t[5]=c("div",{class:"section-title"},"彖辞",-1)),c("div",T,p(Le.value.tuan),1)])):d("",!0),Le.value.xiang?(s(),n("div",L,[t[6]||(t[6]=c("div",{class:"section-title"},"象辞",-1)),c("div",B,p(Le.value.xiang),1)])):d("",!0),Le.value.xiangYue?(s(),n("div",O,[t[7]||(t[7]=c("div",{class:"section-title"},"卦辞",-1)),c("div",Q,p(Le.value.xiangYue),1)])):d("",!0),Le.value.yongshen?(s(),n("div",S,[t[8]||(t[8]=c("div",{class:"section-title"},"用神",-1)),c("div",D,p(Le.value.yongshen),1)])):d("",!0),Le.value.yao&&Le.value.yao.length>0?(s(),n("div",R,[t[9]||(t[9]=c("div",{class:"section-title"},"爻辞",-1)),l(De,{modelValue:Be.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Be.value=e),accordion:""},{default:o(()=>[(s(!0),n(v,null,m(Le.value.yao,(e,a)=>(s(),g(Se,{key:a,name:a,title:Oe(e,a)},{default:o(()=>[c("div",U,[c("div",Y,p(e),1)])]),_:2},1032,["name","title"]))),128))]),_:1},8,["modelValue"])])):d("",!0),c("div",$,[t[16]||(t[16]=c("div",{class:"section-title"},"现代解读",-1)),c("div",E,[Le.value.career?(s(),n("div",N,[c("div",F,[t[10]||(t[10]=c("div",{class:"aspect-name"},"事业运势",-1)),l(Re,{name:"manager-o",color:"#1989fa",size:"16px"})]),c("div",K,p(Le.value.career),1)])):d("",!0),Le.value.business?(s(),n("div",P,[c("div",G,[t[11]||(t[11]=c("div",{class:"aspect-name"},"财运状况",-1)),l(Re,{name:"gold-coin-o",color:"#ff976a",size:"16px"})]),c("div",H,p(Le.value.business),1)])):d("",!0),Le.value.marriage?(s(),n("div",J,[c("div",M,[t[12]||(t[12]=c("div",{class:"aspect-name"},"感情婚姻",-1)),l(Re,{name:"like-o",color:"#ee0a24",size:"16px"})]),c("div",W,p(Le.value.marriage),1)])):d("",!0),Le.value.fame?(s(),n("div",X,[c("div",Z,[t[13]||(t[13]=c("div",{class:"aspect-name"},"学业名利",-1)),l(Re,{name:"medal-o",color:"#07c160",size:"16px"})]),c("div",ee,p(Le.value.fame),1)])):d("",!0),Le.value.travel?(s(),n("div",ae,[c("div",te,[t[14]||(t[14]=c("div",{class:"aspect-name"},"出行旅游",-1)),l(Re,{name:"location-o",color:"#7232dd",size:"16px"})]),c("div",ie,p(Le.value.travel),1)])):d("",!0),Le.value.decision?(s(),n("div",ne,[c("div",se,[t[15]||(t[15]=c("div",{class:"aspect-name"},"决策建议",-1)),l(Re,{name:"guide-o",color:"#ff976a",size:"16px"})]),c("div",le,p(Le.value.decision),1)])):d("",!0)])]),e.interpretation.aspects?(s(),n("div",oe,[t[17]||(t[17]=c("div",{class:"section-title"},"运势解读",-1)),c("div",re,[(s(!0),n(v,null,m(e.interpretation.aspects,(e,a)=>{return s(),n("div",{key:a,class:u(["aspect-card",`aspect-card--${e.level||"neutral"}`])},[c("div",ce,[c("div",de,p(e.name),1),e.level?(s(),n("div",pe,[l(Re,{name:(t=e.level,{good:"smile-o",neutral:"minus",bad:"frown-o"}[t]||"minus"),color:Qe(e.level),size:"16px"},null,8,["name","color"])])):d("",!0)]),c("div",ue,p(e.content),1)],2);var t}),128))])])):d("",!0),e.interpretation.lines&&e.interpretation.lines.length>0?(s(),n("div",ve,[t[18]||(t[18]=c("div",{class:"section-title"},"爻辞解读",-1)),l(De,{modelValue:a.activeLines,"onUpdate:modelValue":t[1]||(t[1]=e=>a.activeLines=e),accordion:""},{default:o(()=>[(s(!0),n(v,null,m(e.interpretation.lines,e=>(s(),g(Se,{key:e.position,name:e.position,title:e.name,class:u({"changing-line":e.changing})},{title:o(()=>[c("div",me,[c("span",ge,p(e.name),1),c("span",ye,p("yang"===e.type?"阳爻":"阴爻"),1),e.changing?(s(),n("span",fe,"变")):d("",!0)])]),default:o(()=>[c("div",be,[c("div",ke,p(e.symbol),1),c("div",he,p(e.interpretation),1)])]),_:2},1032,["name","title","class"]))),128))]),_:1},8,["modelValue"])])):d("",!0),e.interpretation.changing?(s(),n("div",_e,[t[20]||(t[20]=c("div",{class:"section-title"},"变爻解读",-1)),l(Ye,{class:"changing-card"},{desc:o(()=>[c("div",xe,[c("div",Ie," 变爻位置："+p(e.interpretation.changing.positions.join("、")),1),c("div",ze," 变爻数量："+p(e.interpretation.changing.count)+"个 ",1)]),c("div",we,p(e.interpretation.changing.interpretation),1),c("div",Ae,[l(Ue,{type:"warning",size:"medium"},{default:o(()=>t[19]||(t[19]=[r("建议",-1)])),_:1,__:[19]}),c("span",qe,p(e.interpretation.changing.advice),1)])]),_:1})])):d("",!0),e.interpretation.summary?(s(),n("div",Ce,[t[21]||(t[21]=c("div",{class:"section-title"},"解卦总结",-1)),c("div",Ve,[l($e,{text:e.interpretation.summary,background:"#fff",color:"#8b0000",scrollable:!1,wrapable:""},null,8,["text"])])])):d("",!0),e.interpretation.timestamp?(s(),n("div",je,[l(Ue,{type:"default",size:"small"},{default:o(()=>{return[r(" 解卦时间："+p((a=e.interpretation.timestamp,new Date(a).toLocaleString("zh-CN"))),1)];var a}),_:1})])):d("",!0)])):(s(),n("div",Te,[l(Ee,{description:"暂无解卦内容",image:"search"},{bottom:o(()=>t[22]||(t[22]=[c("p",{class:"empty-tip"},"请先完成卜卦，系统将自动生成解卦内容",-1)])),_:1})]))])}}},[["__scopeId","data-v-31cfd2b2"]]),Be={class:"ai-interpretation"},Oe={key:0,class:"loading-container"},Qe={key:1,class:"interpretation-content"},Se={class:"ai-badge"},De={class:"ai-disclaimer"},Re={key:0,class:"interpretation-header"},Ue={class:"interpretation-title"},Ye={key:0,class:"interpretation-subtitle"},$e={key:1,class:"interpretation-sections"},Ee={key:0,class:"section-header"},Ne={class:"section-title"},Fe={key:0,class:"section-level"},Ke={key:2,class:"raw-response"},Pe={class:"raw-content"},Ge={key:3,class:"ai-summary"},He={class:"summary-content"},Je={class:"ai-meta"},Me={key:2,class:"error-state"},We={class:"error-content"},Xe={class:"error-message"},Ze={class:"error-actions"},ea={key:3,class:"request-state"},aa={class:"request-content"},ta={class:"request-actions"},ia={class:"ai-features"},na={class:"feature-item"},sa={class:"feature-item"},la={class:"feature-item"},oa=e({__name:"AIInterpretation",props:{interpretation:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["request-ai","retry","fallback"],setup(e,{emit:a}){const y=a,f=t([]),b=()=>{y("request-ai",{})},k=()=>{y("retry")},h=()=>{y("fallback")},_=e=>({good:"#07c160",neutral:"#ff976a",bad:"#ee0a24",excellent:"#ffd700",warning:"#ff8c00"}[e]||"#ff976a");return(a,t)=>{const y=i("van-loading"),x=i("van-icon"),I=i("van-tag"),z=i("van-collapse-item"),w=i("van-collapse"),A=i("van-notice-bar"),q=i("van-button"),C=i("van-empty");return s(),n("div",Be,[e.loading?(s(),n("div",Oe,[l(y,{size:"24px",color:"#8b0000"},{default:o(()=>t[1]||(t[1]=[r("AI解卦中...",-1)])),_:1,__:[1]}),t[2]||(t[2]=c("div",{class:"loading-text"},"正在调用AI进行深度解读，请稍候...",-1))])):e.interpretation?(s(),n("div",Qe,[c("div",Se,[l(I,{type:"primary",size:"medium"},{default:o(()=>[l(x,{name:"star-o",size:"12px"}),t[3]||(t[3]=r(" AI智能解卦 ",-1))]),_:1,__:[3]}),c("div",De,[l(x,{name:"info-o",size:"12px"}),t[4]||(t[4]=c("span",null,"AI生成内容，仅供参考",-1))])]),e.interpretation.title?(s(),n("div",Re,[c("h3",Ue,p(e.interpretation.title),1),e.interpretation.subtitle?(s(),n("div",Ye,p(e.interpretation.subtitle),1)):d("",!0)])):d("",!0),e.interpretation.sections?(s(),n("div",$e,[(s(!0),n(v,null,m(e.interpretation.sections,(a,t)=>{return s(),n("div",{key:t,class:u(["section-card",{"custom-question-card":e.interpretation.isCustomQuestion}])},[e.interpretation.isCustomQuestion&&"解读回答"===a.title?d("",!0):(s(),n("div",Ee,[c("h4",Ne,p(a.title),1),a.level&&!e.interpretation.isCustomQuestion?(s(),n("div",Fe,[l(x,{name:(i=a.level,{good:"smile-o",neutral:"minus",bad:"frown-o",excellent:"star-o",warning:"warning-o"}[i]||"minus"),color:_(a.level),size:"16px"},null,8,["name","color"])])):d("",!0)])),c("div",{class:u(["section-content",{"custom-question-content":e.interpretation.isCustomQuestion}])},[(s(!0),n(v,null,m(a.content,(a,t)=>(s(),n("div",{key:t,class:u(["content-item",{"custom-question-item":e.interpretation.isCustomQuestion}])},p(a),3))),128))],2)],2);var i}),128))])):d("",!0),e.interpretation.rawResponse?(s(),n("div",Ke,[l(w,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e)},{default:o(()=>[l(z,{title:"查看完整AI回复",name:"raw"},{default:o(()=>[c("div",Pe,p(e.interpretation.rawResponse),1)]),_:1})]),_:1},8,["modelValue"])])):d("",!0),e.interpretation.summary?(s(),n("div",Ge,[t[5]||(t[5]=c("div",{class:"summary-title"},"AI总结",-1)),c("div",He,[l(A,{text:e.interpretation.summary,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",scrollable:!1,wrapable:""},null,8,["text"])])])):d("",!0),c("div",Je,[e.interpretation.timestamp?(s(),g(I,{key:0,type:"default",size:"small"},{default:o(()=>{return[r(" 解卦时间："+p((a=e.interpretation.timestamp,new Date(a).toLocaleString("zh-CN"))),1)];var a}),_:1})):d("",!0),e.interpretation.model?(s(),g(I,{key:1,type:"default",size:"small"},{default:o(()=>[r(" AI模型："+p(e.interpretation.model),1)]),_:1})):d("",!0)])])):e.error?(s(),n("div",Me,[l(C,{description:"AI解卦失败",image:"error"},{bottom:o(()=>[c("div",We,[c("p",Xe,p(e.error),1),c("div",Ze,[l(q,{type:"primary",size:"small",onClick:k,loading:e.loading},{default:o(()=>t[6]||(t[6]=[r(" 重新尝试 ",-1)])),_:1,__:[6]},8,["loading"]),l(q,{type:"default",size:"small",onClick:h},{default:o(()=>t[7]||(t[7]=[r(" 查看传统解卦 ",-1)])),_:1,__:[7]})])])]),_:1})])):(s(),n("div",ea,[c("div",aa,[c("div",ta,[l(q,{type:"primary",size:"normal",onClick:b,loading:e.loading,block:""},{default:o(()=>[l(x,{name:"star-o"}),t[8]||(t[8]=r(" 开始AI解卦 ",-1))]),_:1,__:[8]},8,["loading"])]),c("div",ia,[c("div",na,[l(x,{name:"bulb-o",color:"#ff976a"}),t[9]||(t[9]=c("span",null,"个性化解读",-1))]),c("div",sa,[l(x,{name:"chat-o",color:"#07c160"}),t[10]||(t[10]=c("span",null,"现代化表达",-1))]),c("div",la,[l(x,{name:"guide-o",color:"#1989fa"}),t[11]||(t[11]=c("span",null,"实用建议",-1))])])])]))])}}},[["__scopeId","data-v-0a62b087"]]),ra={class:"interpretation-card"},ca={key:0,class:"interpretation-tabs"},da={class:"tab-content"},pa={class:"tab-content"},ua={key:1,class:"single-interpretation"},va=e({__name:"InterpretationCard",props:{traditionalInterpretation:{type:Object,default:null},aiInterpretation:{type:Object,default:null},loading:{type:Boolean,default:!1},aiLoading:{type:Boolean,default:!1},aiError:{type:String,default:null},enableAI:{type:Boolean,default:!0},showTabs:{type:Boolean,default:!0},interpretationType:{type:String,default:"traditional",validator:e=>["traditional","ai"].includes(e)},defaultTab:{type:String,default:"traditional"}},emits:["tab-change","request-ai"],setup(e,{emit:a}){const r=e,p=a,u=t(r.defaultTab),v=e=>{p("tab-change",e)},m=e=>{p("request-ai",e)};return y(()=>r.defaultTab,e=>{u.value=e}),(a,t)=>{const r=i("van-tab"),p=i("van-tabs");return s(),n("div",ra,[e.showTabs?(s(),n("div",ca,[l(p,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),onChange:v,color:"#8b0000","title-active-color":"#8b0000","title-inactive-color":"#666"},{default:o(()=>[l(r,{title:"传统解卦",name:"traditional"},{default:o(()=>[c("div",da,[l(Le,{interpretation:e.traditionalInterpretation,loading:e.loading},null,8,["interpretation","loading"])])]),_:1}),e.enableAI?(s(),g(r,{key:0,title:"AI解卦",name:"ai"},{default:o(()=>[c("div",pa,[l(oa,{interpretation:e.aiInterpretation,loading:e.aiLoading,error:e.aiError,onRequestAi:m},null,8,["interpretation","loading","error"])])]),_:1})):d("",!0)]),_:1},8,["modelValue"])])):(s(),n("div",ua,["traditional"===e.interpretationType?(s(),g(Le,{key:0,interpretation:e.traditionalInterpretation,loading:e.loading},null,8,["interpretation","loading"])):"ai"===e.interpretationType?(s(),g(oa,{key:1,interpretation:e.aiInterpretation,loading:e.aiLoading,error:e.aiError,onRequestAi:m},null,8,["interpretation","loading","error"])):d("",!0)]))])}}},[["__scopeId","data-v-b980a52b"]]);export{va as I};
